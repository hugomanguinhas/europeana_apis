Faceting

<section>


<p>A collection of facets that group the results along multiple dimensions. A facet represents the result for the search grouped by a certain entity. If you would conduct a search for the keyword 'paris and have a look at the TYPE facet, this facet would tell how much items there exist within your search result grouped by TYPE (such as IMAGE, VIDEO etc.). When you search within your result set for a specific facet, the other items in your facet would still exist (you search for TYPE:IMAGE, then you can still see how many results there are for TYPE:VIDEO etc.). This last functionality, called multi-facets, is not supported for the <a href="/api/data-fields/#technical-metadata-facets">technical metadata facets</a>.</p>

		<tr>
			<td style="width: 168px;">facet</td>
			<td style="width: 95px;">String</td>
			<td style="width: 619px;">Name of an individual facet. See <a href="#individual-facets">individual facets</a>.</td>
		</tr>
		<tr>
			<td style="width: 168px;">f.[FACET_NAME].facet.limit</td>
			<td style="width: 95px;">Number</td>
			<td style="width: 619px;">Number of values an individual facet should contain. The [facet name] part should be replaced with one of the the facet names you specified in `facet` parameter. See <a href="#individual-facets">individual facets</a>.</td>
		</tr>
		<tr>
			<td style="width: 168px;">f.[FACET_NAME].facet.offset</td>
			<td style="width: 95px;">Number</td>
			<td style="width: 619px;">The offset of the first value in an individual facet. The [facet name] part should be replaced with one of the the facet names you specified in `facet` parameter. See <a href="#individual-facets">individual facets</a>.</td>
		</tr>

<h3>Default facets</h3>

We've aligned the logic for faceting across all fields in the API output to be consistent. Previously, faceting on the 'default' facets (such as TYPE, or RIGHTS) would use a different logic than faceting on custom fields (such as proxy_dc_creator). The difference is that now all other values in a list of facet values are returned (multi-facet).

<h3 id="facets">Facets</h3>

<p>The number of records that Europeana contains is very big and growing. Therefore we need efficient ways to allow our users to discover what they need easily. One such technique is a faceted indexing system that classifies each record along multiple dimensions. The facets, seen on the left side of the Europeana portal, can be useful for filtering search results and can also be used by API users. Currently we support the following facets:</p>

<table>
	<thead>
		<tr>
			<th>Facet</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Media Type</td>
			<td>A broad classification of objects into five material types that users may find useful for filtering purposes: text, image, sound, video, 3D.</td>
		</tr>
		<tr>
			<td>Language</td>
			<td>A language of the record.</td>
		</tr>
		<tr>
			<td>Date</td>
			<td>A point or period of time associated with an event in the lifecycle of the record</td>
		</tr>
		<tr>
			<td>Country</td>
			<td>The name of the country of the data provider or "Europe" in the case of Europe-wide projects.</td>
		</tr>
		<tr>
			<td>Copyrights</td>
			<td>Information about rights held in and over the resource.</td>
		</tr>
		<tr>
			<td>Provider</td>
			<td>Europeana Provider</td>
		</tr>
		<tr>
			<td>Completeness</td>
			<td>Internal Europeana measure of the completeness of the metadata of the record.</td>
		</tr>
		<tr>
			<td>UGC</td>
			<td>Whether the record has been contributed by the user community</td>
		</tr>
	</tbody>
</table>

<table>
	<thead>
		<tr>
			<td>Name in search</td>
			<td>Datatype</td>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>COMPLETENESS</td>
			<td>string</td>
		</tr>
		<tr>
			<td>CONTRIBUTOR</td>
			<td>string</td>
		</tr>
		<tr>
			<td>COUNTRY</td>
			<td>string</td>
		</tr>
		<tr>
			<td>DATA_PROVIDER</td>
			<td>string</td>
		</tr>
		<tr>
			<td>LANGUAGE</td>
			<td>string</td>
		</tr>
		<tr>
			<td>PROVIDER</td>
			<td>string</td>
		</tr>
		<tr>
			<td>RIGHTS</td>
			<td>string</td>
		</tr>
		<tr>
			<td>TYPE</td>
			<td>string</td>
		</tr>
		<tr>
			<td>UGC</td>
			<td>string</td>
		</tr>
		<tr>
			<td>YEAR</td>
			<td>string</td>
		</tr>
	</tbody>
</table>

<table>
	<thead>
		<tr>
			<th style="width: 78px;">Field</th>
			<th style="width: 107px;">Datatype</th>
			<th style="width: 697px;">Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td style="width: 78px;">name</td>
			<td style="width: 107px;">String</td>
			<td style="width: 697px;">The name of the facet (COUNTRY, DATA_PROVIDER, LANGUAGE, PROVIDER, RIGHTS, TYPE, UGC, YEAR, a <a href="/api/data-fields/">technical metadata facet</a> or a custom facet)</td>
		</tr>
		<tr>
			<td style="width: 78px;">fields<sup>*</sup></td>
			<td style="width: 107px;">Array (field)</td>
			<td style="width: 697px;">A collection of facet fields. Each field is an object that has a label (String) and a count of objects (Number).</td>
		</tr>
	</tbody>
</table>

<p><sup>*</sup> <em>indicates an obligatory property</em></p>


<h2 id="individual-facets">Individual facets</h2>

<p>API users can select which facets they would like to retrieve beyond the default facet set via the <code>facet</code> parameter. When you request a facet you have to set the profile either as <code>facets</code> or as <code>portal</code> or <code>rich</code> (which both covers facets as well).</p>

<p>The value of the parameter could be "DEFAULT" (which is a shortcut of the Europeana facet set we use on the portal, containing UGC, LANGUAGE, TYPE, YEAR, PROVIDER, DATA_PROVIDER, COUNTRY and RIGHTS), or any field name which is indexed and stored in Apache Solr. We maintain a table in API documentation about the existing <a href="/api/api-fields/">API Fields</a>. In the field type column, "text" means indexed as as a row of distinct terms, while "string" means indexed as phrase, so the whole content is taken as one individual unit.</p>

<p>Users can set one or more facet in one query.</p>

<p>Some facets return values in more than one language, for such facets its also possible to only return values in a specific language. For instance you can request the <b>proxy_dc_type</b> facet but you can also append the language code en for only English labels: <b>proxy_dc_type.en</b>. This works for many fields which can return a LangMap in the record retrieval:</p>

<blockquote>
<p>&amp;facet=proxy_dc_type.en&amp;profile=facets</p>
</blockquote>

<p>Requesting a single facet:</p>

<blockquote>
<p>&amp;facet=proxy_dc_contributor&amp;profile=facets</p>
</blockquote>

<p></p>

<p>Requesting multiple facets can be done with two different syntaxes. You can add multiple facet parameters, or one facet parameter with multiple values separated by commas:</p>

<p>Multiple facet parameters:</p>

<blockquote>
<p>&amp;facet=proxy_dc_coverage&amp;facet=proxy_dc_contributor&amp;profile=facets</p>
</blockquote>

<p></p>

<p>Multiple facets separated by commas</p>

<blockquote>
<p>&amp;facet=proxy_dc_coverage,proxy_dc_contributor&amp;profile=facets</p>
</blockquote>

<p></p>

<p>Requesting the default facets:</p>

<blockquote>
<p>&amp;profile=portal</p>
</blockquote>

<p></p>

<blockquote>
<p>&amp;profile=facets</p>
</blockquote>

<p></p>

<blockquote>
<p>&amp;facet=DEFAULT&amp;profile=facets</p>
</blockquote>

<p></p>

<p>Combining default facets with custom facets:</p>

<blockquote>
<p>&amp;facet=DEFAULT+proxy_dc_contributor&amp;profile=facets</p>
</blockquote>

<p></p>

<h3>Offset and limit of facets</h3>

<p>The API user can set how many facet values to retrieve, and which should be the first one. With these parameters, you can page over all facet values without requesting too much at a time. The limit and offset parameter syntax is a little bit tricky, but if you are familiar with Apache Solr syntax it won't be strange because it is the same.</p>

<p>Syntax: f.[facet name].facet.limit Example: &amp;f.PROVIDER.facet.limit=30</p>

<blockquote>
<p>search.json?wskey=xxxx&amp;query=paris&amp;facet=PROVIDER&amp;profile=facets&amp;f.PROVIDER.facet.limit=30</p>
</blockquote>

<p></p>

<p>Syntax: f.[facet name].facet.offset Example: &amp;f.PROVIDER.facet.offset=30</p>

<blockquote>
<p>search.json?wskey=xxxx&amp;query=paris&amp;facet=PROVIDER&amp;profile=facets&amp;f.PROVIDER.facet.offset=30</p>
</blockquote>

<p></p>

<p>Both parameters accept numeric values.</p>

<p>The default offset value is 0, starting from the first item in the list. 1 offsets the list by one, so the first item to return is the second and so on.</p>

<p>Set a limit of 0 to not return anything for that facet.</p>

<p>By default, the limit of values of an individual facet is 50 when you do not provide the name of an individual facet (with the `facet` parameter). To override this you have to provide a custom limit e.g. via <code>&amp;f.DEFAULT.facet.limit=100</code>.</p>

</section>
